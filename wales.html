<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wales Photos</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #e8dcc4;
            min-height: 100vh;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            color: #3a3a3a;
            font-size: 1.8em;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .date {
            color: #8b7355;
            font-size: 12px;
            margin-bottom: 15px;
            font-style: italic;
        }

        .instructions {
            text-align: center;
            color: #6a5a4a;
            font-size: 13px;
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .group-btn {
            padding: 8px 16px;
            border: 1px solid #8b7355;
            background: transparent;
            font-size: 13px;
            cursor: pointer;
            color: #5a4a3a;
            transition: all 0.2s ease;
            font-family: 'Courier New', monospace;
        }

        .group-btn:hover,
        .group-btn.active {
            background: #5a4a3a;
            color: #e8dcc4;
            transform: translateY(-1px);
        }

        #table {
            position: relative;
            min-height: 700px;
            max-width: 1200px;
            margin: 0 auto;
            background: #d4c4a8;
            border: 2px solid #8b7355;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .photo {
            position: absolute;
            width: 180px;
            height: 180px;
            cursor: grab;
            user-select: none;
            will-change: transform;

            --x: 0px;
            --y: 0px;
            --dx: 0px;
            --dy: 0px;
            --rot: 0deg;

            transform:
                translate3d(calc(var(--x) + var(--dx)),
                    calc(var(--y) + var(--dy)),
                    0) rotate(var(--rot));

            transition: transform 0.45s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .photo:hover {
            z-index: 1000;
            filter: brightness(1.05);
        }

        .photo.dragging {
            cursor: grabbing;
            z-index: 2000;
            transition: none;
            filter: brightness(1.1);
        }

        .photo-frame {
            width: 100%;
            height: 100%;
            background: #faf8f3;
            padding: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid #c9b99a;
            position: relative;
        }

        .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(0.15) contrast(0.95);
            pointer-events: none;
        }

        .photo-label {
            position: absolute;
            bottom: -28px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #5a4a3a;
            pointer-events: none;
            white-space: nowrap;
        }

        /* Washi tape decorations */
        .tape {
            position: absolute;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-top: 1px solid rgba(139, 115, 85, 0.2);
            border-bottom: 1px solid rgba(139, 115, 85, 0.2);
            pointer-events: none;
        }

        .tape.top {
            top: -8px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            width: 60%;
        }

        /* Corner decorations */
        .corner-deco {
            position: absolute;
            width: 15px;
            height: 15px;
            border: 1px solid #8b7355;
            pointer-events: none;
        }

        .corner-deco.tl {
            top: 5px;
            left: 5px;
            border-right: none;
            border-bottom: none;
        }

        .corner-deco.tr {
            top: 5px;
            right: 5px;
            border-left: none;
            border-bottom: none;
        }

        .corner-deco.bl {
            bottom: 5px;
            left: 5px;
            border-right: none;
            border-top: none;
        }

        .corner-deco.br {
            bottom: 5px;
            right: 5px;
            border-left: none;
            border-top: none;
        }

        /* Lightbox */
        #lightbox {
            position: fixed;
            inset: 0;
            background: rgba(232, 220, 196, 0.95);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 5000;
        }

        #lightbox.active {
            opacity: 1;
            pointer-events: auto;
        }

        #lightbox-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
        }

        #lightbox img {
            max-width: 85vw;
            max-height: 85vh;
            border: 10px solid #faf8f3;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.35);
        }

        #lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            background: transparent;
            border: 1px solid #8b7355;
            color: #5a4a3a;
            padding: 8px 16px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            transition: all 0.2s ease;
        }

        #lightbox-close:hover {
            background: #5a4a3a;
            color: #e8dcc4;
        }

        /* Add note feature */
        .add-note-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #5a4a3a;
            color: #e8dcc4;
            border: 2px solid #8b7355;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .add-note-btn:hover {
            transform: scale(1.1);
            background: #4a3a2a;
        }

        .sticky-note {
            position: absolute;
            width: 150px;
            min-height: 150px;
            background: #fff9c4;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            cursor: grab;
            font-size: 12px;
            line-height: 1.6;
            color: #3a3a3a;
            border: 1px solid #f0e68c;
        }

        .sticky-note.dragging {
            cursor: grabbing;
            z-index: 3000;
        }

        .sticky-note textarea {
            width: 100%;
            height: 100px;
            border: none;
            background: transparent;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: none;
            outline: none;
            color: #3a3a3a;
            cursor: text;
        }

        .sticky-note .delete-note {
            position: absolute;
            top: 5px;
            right: 5px;
            background: transparent;
            border: none;
            color: #8b7355;
            cursor: pointer;
            font-size: 14px;
            padding: 2px;
            opacity: 0.5;
            transition: opacity 0.2s;
        }

        .sticky-note .delete-note:hover {
            opacity: 1;
        }

        /* Shuffle button */
        .shuffle-btn {
            padding: 8px 16px;
            border: 1px solid #8b7355;
            background: transparent;
            font-size: 13px;
            cursor: pointer;
            color: #5a4a3a;
            transition: all 0.2s ease;
            font-family: 'Courier New', monospace;
            margin-left: 10px;
        }

        .shuffle-btn:hover {
            background: #5a4a3a;
            color: #e8dcc4;
            transform: rotate(5deg);
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>gtl wales 2025</h1>
        <div class="instructions">drag to arrange • add notes • filter by topic • click to see more <3 </div>
        </div>

        <div class="controls">
            <div id="controls"></div>
            <button class="shuffle-btn" onclick="shuffleAll()">✨ shuffle</button>
        </div>

        <div id="table">
            <div class="corner-deco tl"></div>
            <div class="corner-deco tr"></div>
            <div class="corner-deco bl"></div>
            <div class="corner-deco br"></div>
        </div>

        <button class="add-note-btn" onclick="addNote()" title="Add a note">+</button>

        <div id="lightbox">
            <div id="lightbox-content">
                <button id="lightbox-close">close</button>
                <img id="lightbox-img" />
            </div>
        </div>

        <script>
            const photoStructure = {
                teaching: [
                    'IMG_6495.jpeg', 'IMG_6496.jpeg', 'IMG_6497.jpeg', 'IMG_6563.jpeg',
                    'IMG_6574.jpeg', 'IMG_6575.jpeg', 'IMG_6581.JPG', 'IMG_6590.jpeg',
                    'IMG_6591.JPG', 'IMG_6592.JPG', 'IMG_6593.JPG', 'IMG_6594.JPG',
                    'IMG_6595.jpeg', 'IMG_6597.jpeg', 'IMG_6599.jpeg', 'IMG_6601.jpeg',
                    'IMG_6603.JPG', 'IMG_6604.JPG', 'IMG_6605.JPG', 'IMG_6606.JPG'
                ],
                mit: [
                    'IMG_1398.jpeg', 'IMG_2639.jpeg', 'IMG_2648.jpeg'
                ],
                nature: [
                    'IMG_6382.jpeg', 'IMG_6384.jpeg', 'IMG_6385.jpeg', 'IMG_6394.jpeg',
                    'IMG_6395.jpeg', 'IMG_6403.jpeg', 'IMG_6404.jpeg', 'IMG_6405.jpeg',
                    'IMG_6407.jpeg', 'IMG_6410.jpeg', 'IMG_6417.jpeg', 'IMG_6419.jpeg',
                    'IMG_6420.jpeg', 'IMG_6424.jpeg', 'IMG_6430.jpeg', 'IMG_6432.jpeg',
                    'IMG_6433.jpeg', 'IMG_6442.jpeg', 'IMG_6443.jpeg', 'IMG_6444.jpeg',
                    'IMG_6445.jpeg', 'IMG_6451.jpeg', 'IMG_6458.jpeg', 'IMG_6460.jpeg',
                    'IMG_6462.jpeg', 'IMG_6466.jpeg', 'IMG_6469.jpeg', 'IMG_6473.jpeg',
                    'IMG_6492.jpeg', 'IMG_6494.jpeg', 'IMG_6530.jpeg',
                    'IMG_6534.jpeg', 'IMG_6538.jpeg', 'IMG_6539.jpeg', 'IMG_6540.jpeg',
                    'IMG_6541.jpeg', 'IMG_6559.jpeg', 'IMG_6560.jpeg'
                ]
            };

            const table = document.getElementById('table');
            const controls = document.getElementById('controls');
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');

            let active = null;
            let startX = 0;
            let startY = 0;
            let didDrag = false;

            function randomScatter(photo) {
                const rect = table.getBoundingClientRect();
                const x = 40 + Math.random() * (rect.width - 220);
                const y = 40 + Math.random() * (rect.height - 220);
                const rot = (Math.random() - 0.5) * 12;

                photo.style.setProperty('--x', `${x}px`);
                photo.style.setProperty('--y', `${y}px`);
                photo.style.setProperty('--rot', `${rot}deg`);
            }

            function createControls() {
                ['all', ...Object.keys(photoStructure)].forEach(cat => {
                    const btn = document.createElement('button');
                    btn.className = 'group-btn' + (cat === 'all' ? ' active' : '');
                    btn.textContent = cat;
                    btn.onclick = () => groupPhotos(cat);
                    controls.appendChild(btn);
                });
            }

            function initTable() {
                for (const [category, files] of Object.entries(photoStructure)) {
                    files.forEach(file => {
                        const photo = document.createElement('div');
                        photo.className = 'photo';
                        photo.dataset.category = category;

                        const tapeStyle = Math.random() > 0.5 ? '<div class="tape top"></div>' : '';

                        photo.innerHTML = `
                        ${tapeStyle}
                        <div class="photo-frame">
                            <img src="wales_photos/${category}/${file}">
                        </div>
                        <div class="photo-label">${file.replace(/\..+$/, '')}</div>
                    `;

                        randomScatter(photo);
                        addHoverWiggle(photo);

                        photo.addEventListener('mousedown', startDrag);
                        photo.addEventListener('click', e => {
                            if (didDrag) {
                                e.preventDefault();
                                return;
                            }
                            lightboxImg.src = `wales_photos/${category}/${file}`;
                            lightbox.classList.add('active');
                        });

                        table.appendChild(photo);
                    });
                }
            }

            function startDrag(e) {
                e.preventDefault();
                active = e.currentTarget;
                active.classList.add('dragging');

                startX = e.clientX;
                startY = e.clientY;
                didDrag = false;

                document.addEventListener('mousemove', onDrag);
                document.addEventListener('mouseup', endDrag);
            }

            function onDrag(e) {
                if (!active) return;

                const dx = e.clientX - startX;
                const dy = e.clientY - startY;

                if (Math.abs(dx) > 3 || Math.abs(dy) > 3) {
                    didDrag = true;
                }

                active.style.setProperty('--dx', `${dx}px`);
                active.style.setProperty('--dy', `${dy}px`);
            }

            function endDrag() {
                if (!active) return;

                const x = parseFloat(active.style.getPropertyValue('--x')) || 0;
                const y = parseFloat(active.style.getPropertyValue('--y')) || 0;
                const dx = parseFloat(active.style.getPropertyValue('--dx')) || 0;
                const dy = parseFloat(active.style.getPropertyValue('--dy')) || 0;

                active.style.setProperty('--x', `${x + dx}px`);
                active.style.setProperty('--y', `${y + dy}px`);
                active.style.setProperty('--dx', `0px`);
                active.style.setProperty('--dy', `0px`);
                active.classList.remove('dragging');

                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('mouseup', endDrag);

                setTimeout(() => {
                    didDrag = false;
                }, 10);

                active = null;
            }

            function addHoverWiggle(photo) {
                photo.addEventListener('mouseenter', () => {
                    if (photo.classList.contains('dragging')) return;
                    photo.style.setProperty('--dx', `${(Math.random() - 0.5) * 6}px`);
                    photo.style.setProperty('--dy', `${(Math.random() - 0.5) * 6}px`);
                });

                photo.addEventListener('mouseleave', () => {
                    if (photo.classList.contains('dragging')) return;
                    photo.style.setProperty('--dx', `0px`);
                    photo.style.setProperty('--dy', `0px`);
                });
            }

            function groupPhotos(category) {
                document.querySelectorAll('.group-btn').forEach(btn =>
                    btn.classList.toggle('active', btn.textContent === category)
                );

                document.querySelectorAll('.photo').forEach(photo => {
                    if (category === 'all' || photo.dataset.category === category) {
                        photo.style.display = 'block';
                        randomScatter(photo);
                    } else {
                        photo.style.display = 'none';
                    }
                });
            }

            function shuffleAll() {
                document.querySelectorAll('.photo, .sticky-note').forEach(item => {
                    randomScatter(item);
                });
            }

            function addNote() {
                const note = document.createElement('div');
                note.className = 'sticky-note';

                const rect = table.getBoundingClientRect();
                const x = 100 + Math.random() * (rect.width - 250);
                const y = 100 + Math.random() * (rect.height - 250);
                const rot = (Math.random() - 0.5) * 8;

                note.style.setProperty('--x', `${x}px`);
                note.style.setProperty('--y', `${y}px`);
                note.style.setProperty('--rot', `${rot}deg`);
                note.style.transform = `translate3d(var(--x), var(--y), 0) rotate(var(--rot))`;

                note.innerHTML = `
                <button class="delete-note" onclick="this.parentElement.remove()">×</button>
                <textarea placeholder="write a note..."></textarea>
            `;

                note.addEventListener('mousedown', (e) => {
                    if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'BUTTON') {
                        return;
                    }
                    startDrag(e);
                });

                const textarea = note.querySelector('textarea');
                textarea.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                });

                table.appendChild(note);
            }

            lightboxClose.addEventListener('click', (e) => {
                e.stopPropagation();
                lightbox.classList.remove('active');
            });

            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    lightbox.classList.remove('active');
                }
            });

            window.addEventListener('blur', forceEndDrag);
            document.addEventListener('mouseleave', forceEndDrag);

            function forceEndDrag() {
                if (!active) return;

                active.style.setProperty('--dx', `0px`);
                active.style.setProperty('--dy', `0px`);
                active.classList.remove('dragging');

                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('mouseup', endDrag);

                active = null;
            }

            createControls();
            initTable();
        </script>
</body>

</html>Z